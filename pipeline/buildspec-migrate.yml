version: 0.2
# Exemplo de buildspec para migração de banco de dados

phases:
  install:
    runtime-versions:
      nodejs: 18
    commands:
      - echo "Instalando dependências necessárias para migração"
      - npm install -g sequelize-cli

  build:
    commands:
      - echo "realizando npm install"
      - npm install
      - echo "Executando criação de banco de dados"
      - npx sequelize-cli db:create || echo "Database already exists"
      - echo "Verificando se existem migrações"
      - ls -la migrations/ || echo "Diretório migrations não existe"
      - mkdir -p migrations
      - echo "Executando migrações (se existirem)"
      - npx sequelize-cli db:migrate || echo "Nenhuma migração para executar"